import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as l,b as i,d as s,e as t,f as r,a as d,r as o,o as p}from"./app-B0ryHrfu.js";const h={};function u(c,e){const a=o("RouteLink");return p(),l("div",null,[e[3]||(e[3]=i("h2",{id:"use-a-local-sui-repo",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#use-a-local-sui-repo"},[i("span",null,"Use a local Sui repo")])],-1)),e[4]||(e[4]=i("p",null,"If you often build, then repeating local file access is obviously faster than remote (and more reliable).",-1)),e[5]||(e[5]=i("p",null,'If you use the Rust SDK, replace your Git dependencies with "path".',-1)),e[6]||(e[6]=i("p",null,'For Move dependencies replace Git dependencies with "local".',-1)),i("p",null,[e[1]||(e[1]=s("For suibase users, see ")),t(a,{to:"/how-to/scripts.html#faster-rust-and-move-build"},{default:r(()=>e[0]||(e[0]=[s("here")])),_:1}),e[2]||(e[2]=s(" to re-use its local repo already downloaded."))]),e[7]||(e[7]=d(`<h2 id="build-only-what-you-need" tabindex="-1"><a class="header-anchor" href="#build-only-what-you-need"><span>Build only what you need</span></a></h2><p>If you care only for the client, then do not build the whole thing.<br> Do <code>cargo build -p sui</code> instead of <code>cargo build</code></p><h2 id="parallel-linker" tabindex="-1"><a class="header-anchor" href="#parallel-linker"><span>Parallel Linker</span></a></h2><p>Some build steps are not optimized for parallelism. Notably, you can see this with <code>top</code> on Linux (by pressing <kbd>1</kbd>) and you will see only one core busy while the linker is running.</p><p>One trick that <em>may</em> help is the parallel linker <a href="https://github.com/rui314/mold" target="_blank" rel="noopener noreferrer">Mold</a>.</p><p>After installation, you can enable for Rust by creating a <code>config.toml</code>. The following was verified to work for Sui built on Ubuntu:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>$ cat ~/.cargo/config.toml</span></span>
<span class="line"><span>[target.x86_64-unknown-linux-gnu]</span></span>
<span class="line"><span>rustflags = [&quot;-C&quot;, &quot;link-arg=-fuse-ld=mold&quot;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The performance gain varies widely, you have to try for yourself. Do not expect 10x faster... it accelerates only the link phase. Furthermore, the performance gap versus more recent GNU/LLVM linker release is closing.</p><h2 id="how-does-my-build-time-compare" tabindex="-1"><a class="header-anchor" href="#how-does-my-build-time-compare"><span>How does my build time compare?</span></a></h2><p>See some profiling below.</p><p>Measurements are for clean build of sui and sui-faucet only.</p><details class="hint-container details"><summary>Steps for measuring</summary><p>With suibase, do the following to get one measurement:</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> delete</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>If you do not have suibase, then do the following for the first measurements:</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> devnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://github.com/MystenLabs/sui.git</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sui</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cargo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> build</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --bin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sui</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --bin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sui-faucet</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>... and get additional measurements with:</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cargo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clean</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cargo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> build</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --bin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sui</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --bin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sui-faucet</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></details><p><strong>Modern Linux</strong><br></p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Low : Finished dev [unoptimized + debuginfo] target(s) in 2m 55s</span></span>
<span class="line"><span>High: Finished dev [unoptimized + debuginfo] target(s) in 2m 55s</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Intel i7-13700K (16 Cores), 64 GB, NVMe PCIe 4</span></span>
<span class="line"><span>Ubuntu 22.10, Sui 0.31.2</span></span>
<span class="line"><span>Suibase 0.1.2</span></span>
<span class="line"><span>GCC 12.2 / Mold 1.11</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>M1 MAX macosx</strong><br></p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Low : Finished dev [unoptimized + debuginfo] target(s) in 4m 23</span></span>
<span class="line"><span>High: Finished dev [unoptimized + debuginfo] target(s) in 4m 24s</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Apple M1 Max</span></span>
<span class="line"><span>macOS Ventura 13.3.1 (22E261), Sui 0.31.2</span></span>
<span class="line"><span>Suibase 0.1.2</span></span>
<span class="line"><span>Apple clang version 14.0.3</span></span>
<span class="line"><span>rustc 1.68.2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Old Server (~2013) Windows 10 WSL2</strong><br></p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Low : Finished dev [unoptimized + debuginfo] target(s) in 8m 06s</span></span>
<span class="line"><span>High: Finished dev [unoptimized + debuginfo] target(s) in 8m 20s</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2xIntel Xeon E5-2697v2@2.7GHz(24 Cores), 64 GB, NVMe PCIe 3</span></span>
<span class="line"><span>WSL2 config: 32 VCore, 48 GB</span></span>
<span class="line"><span>Ubuntu 22.04, Sui 0.31.2</span></span>
<span class="line"><span>Suibase 0.1.2</span></span>
<span class="line"><span>GCC 11.3 / Mold 1.11</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,18))])}const b=n(h,[["render",u],["__file","build.html.vue"]]),g=JSON.parse('{"path":"/cookbook/guides/build.html","title":"Build Faster","lang":"en-US","frontmatter":{"title":"Build Faster","order":3,"contributors":true,"editLink":true,"description":"Use a local Sui repo If you often build, then repeating local file access is obviously faster than remote (and more reliable). If you use the Rust SDK, replace your Git dependen...","head":[["meta",{"property":"og:url","content":"https://suibase.io/cookbook/guides/build.html"}],["meta",{"property":"og:site_name","content":"suibase.io"}],["meta",{"property":"og:title","content":"Build Faster"}],["meta",{"property":"og:description","content":"Use a local Sui repo If you often build, then repeating local file access is obviously faster than remote (and more reliable). If you use the Rust SDK, replace your Git dependen..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-08-06T04:52:57.000Z"}],["meta",{"property":"article:modified_time","content":"2024-08-06T04:52:57.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Build Faster\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-08-06T04:52:57.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"suibase.io\\",\\"url\\":\\"https://suibase.io\\"}]}"]]},"headers":[{"level":2,"title":"Use a local Sui repo","slug":"use-a-local-sui-repo","link":"#use-a-local-sui-repo","children":[]},{"level":2,"title":"Build only what you need","slug":"build-only-what-you-need","link":"#build-only-what-you-need","children":[]},{"level":2,"title":"Parallel Linker","slug":"parallel-linker","link":"#parallel-linker","children":[]},{"level":2,"title":"How does my build time compare?","slug":"how-does-my-build-time-compare","link":"#how-does-my-build-time-compare","children":[]}],"git":{"createdTime":1681438739000,"updatedTime":1722919977000,"contributors":[{"name":"mario4tier","email":"mario4tier@users.noreply.github.com","commits":5},{"name":"Frank V. Castellucci","email":"frankiecast@gmail.com","commits":2}]},"readingTime":{"minutes":1.5,"words":450},"filePathRelative":"cookbook/guides/build.md","localizedDate":"April 14, 2023","autoDesc":true}');export{b as comp,g as data};
